<app-header-navbar></app-header-navbar>
<div class="container-fluid dashboard-container">
    <div class="row">
        <div class="col-12 col-lg-2">
            <app-side-navbar></app-side-navbar>
        </div>
        <div class="col-12 col-lg-10">
            <div class="row">
                <div class="col-12 main-container">
                    <div class="row">
                        <div class="col-3" style="text-align: left;">
                            <button mat-button class="menu-button">
                                <mat-icon>assistant_navigation</mat-icon>
                                <span>Marksheet's > Template Format &nbsp;*&nbsp; {{cls | classSuffix}}<span
                                        *ngIf="cls==11 || cls==12">{{stream}}</span></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="main-container">
                    <div class="col-12 col-lg-12 big-container">
                        <div class="main-card">
                            <ng-container *ngIf="!marksheetSelectMode">
                                <div class="col-12 col-lg-5 mt-5 mb-5">
                                    <div class="marksheet-detail-card">
                                        <table class="table table-hover align-middle mt-2 mb-1 bg-white">
                                            <thead class="bg-light">
                                                <tr class="text-muted">
                                                    <th>S.No.</th>
                                                    <th>Template Name</th>
                                                    <th>Class</th>
                                                    <th>Stream</th>
                                                    <th>Remove</th>
                                                </tr>
                                            </thead>
                                            <tbody *ngIf="marksheetTemplate">
                                                <tr>
                                                    <td>
                                                        <p class="mb-0">{{1}}</p>
                                                    </td>
                                                    <td>
                                                        <p class="mb-0">{{marksheetTemplate.templateName |
                                                            titlecase}}</p>
                                                    </td>
                                                    <td>
                                                        <p class="mb-0">{{marksheetTemplate.class |
                                                            classSuffix}}</p>
                                                    </td>
                                                    <td>
                                                        <p class="mb-0">{{marksheetTemplate.stream}}</p>
                                                    </td>
                                                    <td class="mb-0">
                                                        <mat-icon
                                                            (click)="deleteMarksheetTemplateModel(marksheetTemplate._id)">delete</mat-icon>
                                                    </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-7 mt-5 mb-5">
                                    <div class="selected-template-card" matRipple>
                                        <img src="../../../../assets/templates/{{marksheetTemplate.templateName}}.jpg"
                                            alt="">
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="marksheetSelectMode">
                                <div class="col-12 mt-5">
                                    <div class="owl-carousel template-carousel">
                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-1</h6>
                                            <img src="../../../../assets/templates/T1.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T1')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>

                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-2</h6>
                                            <img src="../../../../assets/templates/T2.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T2')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>
                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-3</h6>
                                            <img src="../../../../assets/templates/T3.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T3')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>
                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-4</h6>
                                            <img src="../../../../assets/templates/T4.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T4')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>
                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-5</h6>
                                            <img src="../../../../assets/templates/T5.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T5')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>
                                        <div class="template-card" matRipple>
                                            <h6 style="font-size: 12px;font-weight: bold;">T-6</h6>
                                            <img src="../../../../assets/templates/T6.jpg" alt="">
                                            <div class="row">
                                                <div class="col-6"><button class="submit-button"
                                                        (click)="addExamResultModel('T6')"
                                                        mat-raised-button>&nbsp;&nbsp;&nbsp;Select&nbsp;&nbsp;&nbsp;</button>
                                                </div>
                                                <div class="col-6"><button class="submit-button"
                                                        mat-raised-button>Download</button></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <div class="modal fade show" [class.show]="showModal">
                                <div class="modal-dialog modal-dialog-scrollable">
                                    <div class="modal-content" *ngIf="successMsg">
                                        <div class="modal-header">
                                            <h5 class="modal-title" style="color: transparent;">&nbsp;</h5>
                                        </div>
                                        <div class="modal-body">
                                            <p class="success-message">{{successMsg}}</p>
                                        </div>
                                        <div class="modal-footer">
                                            <mat-icon></mat-icon>
                                        </div>
                                    </div>
                                    <div class="modal-content" *ngIf="!successMsg">
                                        <div class="modal-header">
                                            <h5 class="modal-title">{{updateMode?'Update': deleteMode ? 'Delete'
                                                :'MARKSHEET FORMATE'}}</h5>
                                            <mat-icon matRipple (click)="closeModal()"
                                                style="cursor: pointer;">close</mat-icon>
                                        </div>
                                        <ng-container>
                                            <form [formGroup]="examResultForm" (ngSubmit)="examResultAddUpdate()">
                                                <div class="modal-body">
                                                    <div *ngIf="errorCheck">
                                                        <p class="error-message">{{errorMsg}}</p>
                                                    </div>
                                                    <div class="container-fluid" *ngIf="!deleteMode">
                                                        <div class="row">
                                                            <h6 style="font-size: 12px;font-weight: 500;">
                                                                {{selectedTemplate}} For {{cls | classSuffix |
                                                                lowercase}}
                                                                <span *ngIf="cls==11 || cls==12">{{stream}}</span>
                                                            </h6>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer" *ngIf="!deleteMode">
                                                    <button class="submit-button" mat-raised-button
                                                        type="submit">Set</button>
                                                </div>

                                            </form>
                                        </ng-container>
                                        <div *ngIf="deleteMode">
                                            <div class="modal-body">
                                                <ng-container>
                                                    <h3 style="color: #000;font-size: 16px;letter-spacing: normal;">
                                                        Note :
                                                        As
                                                        soon as the marksheet template for the {{cls |
                                                        classSuffix}} <span *ngIf="cls==11 || cls==12">{{stream
                                                            |lowercase}}</span>
                                                        is
                                                        deleted, the exam result for all the students will be
                                                        automatically deleted.</h3>
                                                </ng-container>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="delete-button" mat-raised-button type="button"
                                                    (click)="marksheetTemplateDelete(deleteById)">Ok</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="spinner-container" *ngIf="loader">
            <div class="spinner-overlay" *ngIf="loader">
                <mat-progress-spinner *ngIf="loader" diameter="65" mode="indeterminate"
                    strokeWidth="3"></mat-progress-spinner>
            </div>
        </div> -->